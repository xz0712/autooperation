# 运维自动化发展的层级：

智能化

服务化、api化

Web化、平台化

标准化、工具化



## 智能化的自动化扩容、缩容、服务降级、故障自愈

### 自动化扩容

触发机制——》决策系统（决策树）——》

#### 第一步：Zabbix触发action

##### 触发：

1. 当某个集群的访问量超过最大支撑量，比如10000

2. 并持续5分钟

3. 不是攻击

4. 资源池有可用资源

   4.1.当前网络带宽使用率

   4.2.如果是公有云——钱够不够

5. 当前后端服务支撑量是否超过阈值       如果超过应该后端先扩容

6. 数据库是否可以支撑当前并发

7. 当前自动化扩展队列，是否有正在扩容的节点

8. 其它业务相关的

   ​		**之前：**先判断Buffer是否有最近x小时，已经移除的之前创建的虚拟机，并查询软件版本是否和当前一致，如果一致，跳过2,3,4步骤；如果不一致，跳过2,3

#### 第二步：OpenStack创建虚拟机

#### 第三步：Saltstack配置环境----监控

#### 第四步：部署系统部署当前代码

#### 第五步：测试服务是否可用（注意间隔和次数）

#### 第六步：加入集群

#### 第七步：通知（短信、邮件）

### 自动化缩容

#### 第一步：触发条件和决策

#### 第二步：从集群中移除节点--关闭监控--移除

#### 第三步：通知

#### 第四步：移除的节点存放于Buffer里面

#### 第五步：Buffer里面超过一天的虚拟机，自动关闭，存放于xx区

#### 第六步：xx区的虚拟机，每7天清理删除